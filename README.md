Side Project - CoC Game Helper 
============
**Author**: [Chuxi Wang](https://www.instagram.com/_mialsy_/ "click here to see awesome kitties, helps me survive the final week :)") 

**Summary**: This app is inspired from my experience with playing COC TRPG with my friends - that we cannot find a good app for us to roll dice, and keep track of players status. In COVID-days, I am definitely more obsessed than playing game remotely. Thus, I want to create such an app so that I can play "TRPG" (there is no table techinically) games with friends. 

# :octopus: About CoC
CoC is the short for "Call of Cthulhu", it is "a horror fiction role-playing game based on H. P. Lovecraft's story of the same name and the associated Cthulhu Mythos" - from [wikipedia](https://en.wikipedia.org/wiki/Call_of_Cthulhu_(role-playing_game) "click here to view wiki").

This is a type of role playing game, where players can either be a keeper - who is in charge of updating game progress, and make changes to character's status; or a player - who owns one character, and play as the character. 

Below is a YouTube video that may help you know more about CoC game, clicküëá to go to youtube video.

[![CoC Game Introduction Video](https://i.ytimg.com/an_webp/wS1cni6K304/mqdefault_6s.webp?du=3000&sqp=CNyi6o0G&rs=AOn4CLDjH-uJd2cOxDsrn0fd-RRIRmyTHA)](https://youtu.be/wS1cni6K304 "click here to watch the video")
<p align="right">
<a href = "https://github.com/CS601-F21/side-project-mialsy#side-project---coc-game-helper" title = "back to top">‚¨ÜÔ∏è</a>
</p>
### Game Setting
In the CoC game, there is usaully a keepr who is in charge of the game progress, and a few players (usually 1-5). The character in the game usually have status like hit points (HP), magic points (MP) like any RPG, but specially, in a CoC game, the character also has luck and sanity for status, which is originated from the idea that people lose sanity when seeing nightmare creactures. So in this app, I followed the same setting.

### Roll a Dice!
The game progress of the CoC game is usually facilited by rolling a dice. Rolling a dice can represents a lot of things - from how much damage you created for a monster NPC, to things like how charming your character appear. Thus anohter key feature for this app is to roll a dice. 


### Chat in Game
As CoC game is a "word" game - the keeper need to tell the player about the story, and the player would speak and act as the character, chatting is definetly necessary for this application. Thus, the chatting feature is supported in this app. 
<p align="right">
<a href = "https://github.com/CS601-F21/side-project-mialsy#side-project---coc-game-helper" title = "back to top">‚¨ÜÔ∏è</a>
</p>
# :dart: Features
In this game, the user can have two workflow:
- Create a game - this allow user to be the "Keeper" of the game, the user can name a game, set up characters for the game, and share the game room link with friends.
- Join a game as player - the user will be able to enter a link keeper provides, choose a character and play game as the choosen character. 
- In game - during game, the keeper will be able to manage game (update status of characters), and both keeper and player will be able to send chat messages, and roll a dice!

All status and chatting messages update are real time updating in this application, you can refer to the below demo section to see what is like. 
 
The following table shows what you can do as a keeper and as a player:

|Role| Create Game| Create Characters| Choose a Character to Play | Update Characters Status| Roll a Dice| Chat |
|---|---| ---| ---| ---| --- | --- |
|Keeper| :heavy_check_mark: | :heavy_check_mark: | :black_square_button: | :heavy_check_mark: | :heavy_check_mark: | :heavy_check_mark: | 
|Player| :black_square_button: | :black_square_button: | :heavy_check_mark: | :black_square_button:| :heavy_check_mark: | :heavy_check_mark: |

I have also add some frontend features to promote user experience:
- Copible shared link
- Autogenerated avatar for characters
- Game Over background when a character's hp decresed to 0

### Demo
Below shows game creation and in game:

**Game Creation Demo**

![creation](https://github.com/CS601-F21/side-project-mialsy/blob/main/demo_gif_creation.gif)

**In Game Demo**

![in game](https://github.com/CS601-F21/side-project-mialsy/blob/main/demo_in_game.gif)
<p align="right">
<a href = "https://github.com/CS601-F21/side-project-mialsy#side-project---coc-game-helper" title = "back to top">‚¨ÜÔ∏è</a>
</p>

# :wrench: Implementation 
The app is inplmeneted with a front end and backend seperated architecture. 

The frontend is built with react, with stomp client to send messages to socket channel, and antd components as UI building bricks.

The backend is built with Spring Boot. For real time update, spring WebSocket was used to send chating messages, send dice roll infomation as well as update user's status. For simplicity of the code, the Lombok library was used for code generation of getters, setters, and builder of the models and POJOs.
<p align="right">
<a href = "https://github.com/CS601-F21/side-project-mialsy#side-project---coc-game-helper" title = "back to top">‚¨ÜÔ∏è</a>
</p>

# :running: Run Code
- Before running application:

Please note that the database setup and frontend .env file need to be created to run this program correctly.

You will need to create tables with the following columns:
|Table Name| Columns|
|------|--------|
|Game|id(long), name(varchar)|
|Player|id (long) , is_keeper (tinyint), game_id (long), name (varchar), age (int), sex(varchar), occupation(varchar), hit_points(int), sanity (int), luck(int), magic(int), description(varchar), occupation(varchar) |

Set up your database in application configs (example shown as below):
```
# database
spring.jpa.hibernate.ddl-auto=none
spring.datasource.url={YOUR_DB_URL_HERE}
spring.datasource.username={YOUR_DB_USERNAME}
spring.datasource.password={YOUR_DB_PASSWORD}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect
spring.jpa.show-sql=true
```

And set up .env config file in the client root directory:
```
REACT_APP_BASE_URL="{YOUR_BACK_END_URL_HERE}"
```

- Run backend (database config and setup required):
```
cd coc
java -jar  coc-0.0.1.jar
```
- Run frontend (.env setup required):
```
cd client
npm install
npm start
```
<p align="right">
<a href = "https://github.com/CS601-F21/side-project-mialsy#side-project---coc-game-helper" title = "back to top">‚¨ÜÔ∏è</a>
</p>

